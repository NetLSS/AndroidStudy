# 안드로이드 SQLite 데이터베이스 개요

데이터 베이스 개념을 한번더 상기시켜보고 안드로이드에서의 DBMS를 복습하자

## 데이터베이스 테이블

- 테이블은 데이터베이스에 필수적인 데이터 구조를 제공
- 예를들면 고객 테이블, 제품 테이블 등이 있을 수 있음
- 테이블에 고유한 이름이 지정되며. 같은 데이터베이스 내에서 이름 중복은 불가능함

## 데이터베이스 스키마

- 데이터의 특성을 정의하는 것
- 고객이름은 20자 이내, 고객 전화번호는 특정 형식 숫자데이터 등
- 또는 테이블과의 관계 등을 정의하는 데도 사용됨

## 열과 데이터 타입

- 각 열은 테이블의 데이터 필드를 나타냄
- 각 열은 특정 데이터 타입으로 정의됨

## 데이터베이스 행

- 새로운 레코드는 행으로 저장됨.
- 예를들어 고객테이블에 새 고객이 추가되면 새로운 행이 추가되어 해당 고객의 정보가 저장됨
- 레코드, 또는 항목(Entry) 라고도 함

## 기본 키 개요

- 각 데이터베이스 테이블은 테이블의 각 행을 고유하게 식별하는 데 사용할 수 있는 하나 이상의 열을 포함해야함
- 이를 기본키라고 함
- 특정행을 고유하게 식별할 수 있도록 해줌. (이를 통해 삭제, 수정 등 처리 가능)

## SQLite 란

- 임베디드 관계형 데이터베이스 관리 시스템 (Embedded RDBMS)
- 대부분의 RDBMS는 독자적으로 실행되는 독립 실행형 서버 프로세스, 이와 함께 필요한 앱이 동작
- 그러나 SQLite는 임베디드 RDBMS 임.
  - 앱과 연결되는 라이브러리 형태로 제공되기 때문
  - 백그라운드에서 실행되는 독립 실행형 데이터베이스 서버 없음
  - 모든 데이터베이스 오퍼레이션은 SQLite 라이브러리에 포함된 함수의 호출을 통해 앱 내부에서 처리
  - 크기도 작아 모바일용으로 주로 사용 (iOS, Android 채택)
- C 언어로 작성되어 자바래퍼 등의 래퍼 클래스를 활용해서 사용

## SQL

- Structured Query Language (보통 시퀄 이라고 발음함)
- RDB 의 데이터를 읽거나 쓰거나 등

## AVD 에서 SQLite 사용

- adb 셸에서
- adb -e shell
- su (슈퍼권한)
- SQLite 데이터베이스에 저장된 데이터는 앱이 실행중인 안드로이드 장치 파일 시스템의 데이터베이스 파일에 저장됨 (.db 확장)
- /data/data/<패키지명>/databases/<데이터베이스파일명>.db
- `.`이 붙은 명령어는 SQLite 자체 명령어임 (SQL이 아닌)
- 실제 기기로 하기에 권한 부족 등의 문제가많을 수 있어 AVD 사용을 추천

## 안드로이드 Room 퍼시스턴스 라이브러리

- SQLite 는 C언어로 작성되어 있기에 Java, Kotlin 에서 사용하려면
- 안드로이드 SDK 의 SQLite DBMS 상위 계층을 제공하는 클래스 사용 (과거)
  - 코드량 많음
  - LiveData, 생명주기 등 새로운 아키텍처의 장점을 얻지 못함
- 최근에는 Jetpack 아키텍쳐 컴포넌트에 Room 퍼시스턴스 라이브러리가 포함됨
  - 데이터베이스 시스템의 상위 계층으로. 고수준의 인터페이스를 제공함
  - 최신 앱 아키텍처를 따르며, 최소한 코드로 로컬 데이터를 저장가능함

