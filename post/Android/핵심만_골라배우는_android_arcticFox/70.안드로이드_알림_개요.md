# μ•λ“λ΅μ΄λ“ μ•λ¦Ό κ°μ”
 
> λ³Έ νμ΄μ§€λ” μ €μ [μ•λ¦Όμ•± λ°λ¨ λ νμ§€ν† λ¦¬](https://github.com/NetLSS/LocalNotifyDemo)μ™€ μ—°κ²°λ©λ‹λ‹¤.

- μ•λ¦Ό : μ•±μ΄ μ‹¤ν–‰λκ³  μμ§€ μ•κ±°λ‚, λ°±κ·ΈλΌμ΄λ“ μƒνƒμΌ λ• μ‚¬μ©μμ—κ² λ©”μ„Έμ§€λ¥Ό μ „λ‹¬ν•λ” λ°©λ²•
- λ΅μ»¬ μ•λ¦Όκ³Ό μ›κ²© μ•λ¦Όμ΄ μμ
  - λ΅μ»¬ μ•λ¦Ό: μ¥μΉμ—μ„ μ‹¤ν–‰μ¤‘μΈ μ•±μ—μ„ μƒμ„±λλ” μ•λ¦Ό
  - μ›κ²© μ•λ¦Ό: μ›κ²© μ„λ²„μ—μ„ μƒμ„λμ–΄ μ¥μΉμ— μ „μ†΅λλ” μ•λ¦Ό
- κ° μ•λ¦Όμ€ λ²„νΌ κ°™μ€ κ²ƒμ„ ν¬ν•¨ν•  μ μμ–΄μ„ μ•λ¦Όμ„ λ³΄λ‚Έ μ•±μ„ μ‹¤ν–‰ν•  μ μλ‹¤.
- λ μ•λ“λ΅μ΄λ“μ—μ„λ” **μ§μ ‘ μ‘λ‹µ μ•λ¦Ό**μ„ μ§€μ›ν•μ—¬. μ‚¬μ©μκ°€ λ°”λ΅ μ•λ¦Όμ— λ€ν• μ‘λ‹µμ„ λ°”λ΅ λ³΄λ‚Ό μ μκ² ν•λ‹¤.

## μ•λ¦Ό κ°μ”

- μ•λ“λ΅μ΄λ“ 8μ΄μƒ λ²„μ „ λ¶€ν„°λ” μ•± λ΅ μ² μ•„μ΄μ½μ„ κΈΈκ² λλ¬ μ•±κ³Ό κ΄€λ ¨λ μ•λ¦Όμ„ λ¨λ‘ λ³Ό μ μλ‹¤.
- μ•λ“λ΅μ΄λ“ 8μ΄μƒ λ²„μ „ λ¶€ν„°λ” μ‚¬μ©μκ°€ λ―Έν™•μΈν• μ•λ¦Όμ΄ μμ„ λ• μ•„μ΄μ½μ— μ μΌλ΅ λ‚νƒ€λ‚΄λ” μ•λ¦Ό λ„νΈλ¥Ό μ§€μ›ν•λ‹¤.
- μ•λ¦Όμ„ νƒ­ν•λ©΄ λ³΄ν†µ ν•΄λ‹Ή λ©”μ„Έμ§€λ¥Ό λ¨λ‚Έ μ•λ¦Όμ„ μ‹¤ν–‰
- λν• μ•λ¦Όμ—λ” μ•΅μ… λ²„νΌμ΄ ν¬ν•¨λ  μ μμ–΄ νΉμ • μ‘μ—… μν–‰μ΄ κ°€λ¥
- λ μ‚¬μ©μκ°€ μ§μ ‘ μ•λ¦Όμ— λ€ν• ν…μ¤νΈ μ‘λ‹µμ„ λ³΄λ‚Ό μλ„ μμ. (μ•± ν¬κ·ΈλΌμ΄λ“ μ‹¤ν–‰ν•„μ” μ—†μ΄ μ•λ μ‘λ‹µκ°€λ¥)

## μ•λ¦Ό μ±„λ„ μƒμ„±ν•κΈ°

- μ•±μ—μ„ μ•λ¦Όμ„ μ „μ†΅ν•κΈ° μ„ν•΄ μ•λ¦Ό μ±„λ„ μƒμ„± ν•„μ”
- μ•±μ—μ„ μ±„λ„μ„ κ³ μ ν μ‹λ³„ν•λ” ID, μ±„λ„ μ΄λ¦„, μ±„λ„ μ„¤λ…μΌλ΅ κµ¬μ„±
- μ‚¬μ©μλ” μ±„λ„ μ΄λ¦„ λ° μ„¤λ…μ„ ν™•μΈν•  μ μμ
1. `NotificationChannel` μΈμ¤ν„΄μ¤λ¥Ό κµ¬μ„±
2. ν•΄λ‹Ή μΈμ¤ν„΄μ¤λ¥Ό `NotificationManager` ν΄λμ¤μ `createNotificationChannel()` ν•¨μμ— μ „λ‹¬

```kotlin
import android.app.NotificationChannel
import android.app.NotificationManager
import android.content.ClipDescription
import android.content.Context
import android.graphics.Color
import android.os.Build
import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import androidx.annotation.RequiresApi

class MainActivity : AppCompatActivity() {

    private var notificationManager: NotificationManager? = null

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        notificationManager = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager

        
    }

    @RequiresApi(Build.VERSION_CODES.O)
    private fun createNotificationChannel(id: String, name: String, description: String) {
        val importance = NotificationManager.IMPORTANCE_LOW
        val channel = NotificationChannel(id, name, importance)
        
        channel.apply { 
            this.description = description
            enableLights(true)
            lightColor = Color.RED
            enableVibration(true)
            channel.vibrationPattern = longArrayOf(100, 200, 300, 400, 500, 400, 300, 200, 400)
        }
        
        notificationManager?.createNotificationChannel(channel)
    }
}
```

- μ±„λ„ μ‚­μ 

```kotlin
        val channelID = "com.lilcode.examples.notifydemo.news"
        notificationManager?.deleteNotificationChannel(channelID)
```

- μ•λ¦Ό μƒμ„± λ° μ „λ‹¬

```kotlin
    @RequiresApi(Build.VERSION_CODES.O)
    fun sendNotification(view: View) {
        // μ•λ¦Ό μƒμ„±
        val notification = Notification.Builder(this@MainActivity, newsChannelID)
            .setContentTitle("Example Notification")
            .setContentTitle("This is an example notification.")
            .setSmallIcon(android.R.drawable.ic_dialog_info)
            .setChannelId(newsChannelID)
            .setNumber(999)
            .build()

        val notificationID = 101 // μ •μκ°’ μ•„λ¬΄κ±°λ‚ (ν–¥ν›„ μ•λ¦Ό λ³€κ²½μ‹ μ‚¬μ©λ¨)

        notificationManager?.notify(notificationID, notification)
    }

    companion object {
        const val newsChannelID = "com.lilcode.example.localnotifydemo"
    }
```

- κ° μ•λ¦Όμ— λ€ν• μ‹¤ν–‰ μ‹ μ–΄λ–»κ² ν•΄λ‹Ή μ•λ¦ΌμΌλ΅ μ‹¤ν–‰ν–λ”μ§€ μ•μ μκ² λ‚
  - μ΄κ±΄ ν•΄λ‹Ή μ•λ¦Όμ— λ€ν• ν¬λ”©μΈν…νΈμ— μ •λ³΄λ¥Ό λ„£λμ§€ λλ” μ‹¤ν–‰ν•΄μ•Όν•  μ•΅ν‹°λΉ„ν‹°λ¥Ό ν¬λ”©μΈν…νΈμ— λ‹΄μ•„ μ „λ‹¬ν•΄μ„ ν™•μΈν•  μ μμ„λ“―ν•λ‹¤.


- μ•λ¦ΌμΌλ΅ λ¶€ν„° μ•΅ν‹°λΉ„ν‹° μ‹¤ν–‰ μ‹ν‚¤κΈ°

```kotlin
    fun sendNotification(view: View) {

        val resultIntent = Intent(this, ResultActivity::class.java) // π‘

        val pendingIntent = PendingIntent.getActivity(this, 0, resultIntent, PendingIntent.FLAG_UPDATE_CURRENT) // π‘
        // PendingIntent.FLAG_UPDATE_CURRENT : ν¬λ”© μΈν…νΈκ°€ μ΄λ―Έ μ΅΄μ¬ν• κ²½μ°, Extra dataλ¥Ό μƒλ΅μ΄ μΈν…νΈ λ°μ΄ν„°λ΅ μ—…λ°μ΄νΈ
        // κ°κ°μ μ•λ¦Όμ—μ„λ” ν¬λ”©μΈν…νΈκ°€ λ™μΌ ν•λ„λ΅

        // μ•λ¦Ό μƒμ„±
        val notification = Notification.Builder(this@MainActivity, newsChannelID)
            .setContentTitle("Example Notification")
            .setContentTitle("This is an example notification.")
            .setSmallIcon(android.R.drawable.ic_dialog_info)
            .setChannelId(newsChannelID)
            .setNumber(999)
            .setContentIntent(pendingIntent) // π‘
            .build()

        val notificationID = 101 // μ •μκ°’ μ•„λ¬΄κ±°λ‚ (ν–¥ν›„ μ•λ¦Ό λ³€κ²½μ‹ μ‚¬μ©λ¨)

        notificationManager?.notify(notificationID, notification)
    }
```