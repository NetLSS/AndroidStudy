<!-- 
commit message
kotlin in action : Annotation

μƒλµ λ μ±•ν„°λ” ν–¥ν›„ μ±„μ›μ§ μμ •. π…
-->

# 10μ¥ μ—λ…Έν…μ΄μ…κ³Ό λ¦¬ν”λ ‰μ…

## 10.2.3 μ• λ…Έν…μ΄μ…μ„ ν™μ©ν• μ§λ ¬ν™” μ μ–΄

μ μ΄ν‚¤λ“μ μ§λ ¬ν™” λΌμ΄λΈλ¬λ¦¬λ¥Ό μλ΅ λ“ λ‹¤.

### @JsonExclude λ΅ μ• λ…Έν…μ΄μ…λ ν”„λ΅νΌν‹°

```kotlin
val properties = kClass.memberProperties
    .filter { it.findAnnotation<JsonExclude>() == null}
```

JsonExlude μ• λ…Έν…μ΄μ… λ ν”„λ΅νΌν‹°λ¥Ό ν•„ν„°λ§(μ μ™Έ) ν•λ‹¤. π‘

### @JsonName

```kotlin
annotation class JsonName(val name: String)

data class Person(
    @JsonName("alias") val firstName: String,
    val age: Int
)
```

@JsonName μ€ μ„μ™€ κ°™μ΄ μ‚¬μ©ν•  μ μμ—λ‹¤.

```kotlin
val jsonNameAnnotaion = prop.findAnnotation<JsonName>() // JsonName μ• λ…Έν…μ΄μ…μ„ μ–»λ”λ‹¤ (μ—†μΌλ©΄ null)
val proName = jsonNameAnnotation?.name ?: prop.name // JsonName μ name μΈμλ¥Ό μ°Ύκ³  μ—†μΌλ©΄ prop.name μ„ μ‚¬μ© 
```

μ°λ¦¬μ μ»¤μ¤ν…€ μ§λ ¬ν™” λ΅μ§μ— μ„ μ‚¬ν•­μ„ λ°μν•΄λ³΄μ

```kotlin
private fun StringBuilder.serializeObject(obj: Any) {
    obj.javaClass.kotlin.memberProperties
        .filter { it.findAnnotation<JsonExclude>() == null } // μ μ™Έ ν”„λ΅νΌν‹°λ¥Ό ν•„ν„°λ§ 
        .joinToStringBuilder(this, prefix = "{", postfix = "}") {
            serializeProperty(it, obj)
        }
}
```

β¬† @JsonExclude μ• λ…Έν…μ΄μ…μ„ μ²λ¦¬ν•λ‹¤.

```kotlin
private fun StringBuilder.serializeProperty(
    prop: KProperty1<Any, *>, obj: Any
) {
    val jsonNameAnn = prop.findAnnotation<JsonName>()
    val propName = jsonNameAnn?.name ?: prop.name
    serializeString(propName)
    append(": ")
    serializePropertyValue(prop.get(obj))
}
```

β¬† @JsonName μ„ μ²λ¦¬ν•λ‹¤.

    