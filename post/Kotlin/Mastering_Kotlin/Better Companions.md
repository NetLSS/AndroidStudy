# Better companion

`companion object` ëŠ” ë°”ê¹¥ í´ëž˜ìŠ¤(enclsosing class) ì—ì„œ ë©”ì„œë“œë‚˜ í”„ë¡œí¼í‹°ë¥¼ ì ‘ê·¼í•  ìˆ˜ ìžˆê²Œí•˜ëŠ” íš¨ìœ¨ì ì¸ ë°©ë²•ìž…ë‹ˆë‹¤.

ì•½ê°„ Java ì˜ Static ëŠë‚Œì´ë¼ê³  í•  ìˆ˜ë„ ìžˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ, `companion object` ë¥¼ ìžë°”ì—ì„œ ì°¸ì¡°í•  ë–„ëŠ” ì‚´ì§ ë³µìž¡í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ê·¸ëŸ¼ ì–´ë–»ê²Œ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ”ì§€ ì•Œì•„ë´…ì‹œë‹¤.

## ì–´ë–»ê²Œ `companion object` ê°€ ë™ìž‘í• ê¹Œ

ì½”í‹€ë¦° í´ëž˜ìŠ¤ì— ì»´íŒ¨ë‹ˆì–¸ ê°ì²´ê°€ ì„ ì–¸ë˜ë©´ ì»´íŒŒì¼ëŸ¬ëŠ” ì»´íŒŒì¼ ë•Œ ëª…ëª…ëœ ë‚´ë¶€ í´ëž˜ìŠ¤ë¥¼ ìƒì„±í•˜ê²Œ ë©ë‹ˆë‹¤.

ì•„ëž˜ ì½”ë“œëŠ” ë¹ˆ ì»´íŒ¨ë‹ˆì–¸ ê°ì²´ë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

```kotlin
class Widget {
    companion object { }
}
```

ì•žì˜ ì½”ë“œì— ì˜í•´ Java ì½”ë“œê°€ ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ ìƒì„±ë˜ë©´ ì•„ëž˜ì™€ ê°™ìŠµë‹ˆë‹¤.

```java
public final class Widget {
   public static final Widget.Companion Companion = new Widget.Companion((DefaultConstructorMarker)null);

   ...
   public static final class Companion {
      private Companion() {
      }

      ...
   }
}
```

ì¦‰ ë°”ê¹¥ í´ëž˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ì¸ìŠ¤í„´ìŠ¤í™” ë  ë•Œ ë§ˆë‹¤ ë‚´ë¶€ í´ëž˜ìŠ¤ì— ìžˆëŠ” ì¸ìŠ¤í„´ìŠ¤ë„ ì¸ìŠ¤í„´ìŠ¤í™” ë˜ê²Œë©ë‹ˆë‹¤.

ì´ëŠ” java ì—ì„œ `companion` ì¸ìŠ¤í„´ìŠ¤ë¥¼ í†µí•´ì„œ í•´ë‹¹ í´ëž˜ìŠ¤ì˜ ì†ì„±ê³¼ ë©”ì„œë“œì— ì ‘ê·¼í•  ìˆ˜ ìžˆê²Œë©ë‹ˆë‹¤.

```java
// Main.java
public class Main {
    public static void main(String[] args) {
        Widget.Companion.goo();
    }
}
```

ì»´íŒ¨ë‹ˆì–¸ ì˜¤ë¸Œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ ìžë°”ì˜ static ê³¼ ë§¤ìš° ìœ ì‚¬í•œ êµ¬ë¬¸ì„ ì‚¬ìš©í•  ìˆ˜ ìžˆê²Œ ë˜ëŠ”ë“¯ í•©ë‹ˆë‹¤.

ê·¸ëŸ¬ë‚˜ ì´ëŸ¬í•œ companion object ëŠ” ì‹¤ì œ ì‚¬ìš©ì„ ìœ„í•´ ì¸ìŠ¤í„´ìŠ¤í™” í•´ì•¼í•˜ëŠ” ì‹¤ì œ ê°œì²´ìž…ë‹ˆë‹¤.

ì•„ëž˜ì—ì„œ ì»´íŒ¨ë‹ˆì–¸ ì˜¤ë¸Œì íŠ¸ë¥¼ ì¢€ ë” ìž˜ ì‚¬ìš©í•  ìˆ˜ ìžˆëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

## ì»´íŒ¨ë‹ˆì–¸ ì˜¤ë¸Œì íŠ¸ëŠ” ë„ëŒ€ì²´ ì–¸ì œ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ê¹Œ?

ì½”í‹€ë¦°ìœ¼ë¡œ ê°œë°œì„ í•˜ë‹¤ë³´ë©´ ìƒìˆ˜ë¥¼ ì •ì˜í•  ë•Œ ì£¼ë¡œ ì»´íŒ¨ë‹ˆì–¸ ì˜¤ë¸Œì íŠ¸ë¥¼ ì‚¬ìš©í•´ì˜¤ê³¤ í–ˆëŠ”ë°. ê·¸ëŸ¼ ì–¸ì œ ì»´íŒ¨ë‹ˆì–¸ ì˜¤ë¸Œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ?

ë‹¤ìŒ ì„¸ ê°€ì§€ë¥¼ ì˜ˆë¡œ ë“¤ ìˆ˜ ìžˆì„ ê²ƒ ê°™ë‹¤.

- private ìƒì„±ìžì™€ í•¨ê»˜ íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ ìž‘ì„±í•  ë•Œ
- static constants ì™€ ë©”ì„œë“œ ì œê³µ
- ìµœìƒìœ„ í”„ë¡œí¼í‹° ë° ë©”ì„œë“œ ë²”ìœ„ ì§€ì •(Scoping top-level properties and functions)

Companion object ëŠ” ë°”ê¹¥ í´ëž˜ìŠ¤ì˜ private ì†ì„±, ë©”ì„œë“œ ë° ìƒì„±ìžì— ì ‘ê·¼í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ì¦‰ ì´ëŠ” í´ëž˜ìŠ¤ì— private ìƒì„±ìžê°€ ìžˆì„ ë•Œë„ í•´ë‹¹ Companion object ì—ì„œ ì´ë¥¼ ì‚¬ìš©í•´ì„œ í´ëž˜ìŠ¤ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™” í•  ìˆ˜ ìžˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì´ë¥¼ í†µí•´ íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ ìž‘ì„±í•´ì„œ í´ëž˜ìŠ¤ ìƒì„± ë°©ë²•ì„ ì œì–´ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ì‹¤ì œë¡œ íŒ©í† ë¦¬ ë©”ì„œë“œ ê²½ìš° ì´ëŸ°ì‹ìœ¼ë¡œ ì •ì˜í•˜ëŠ” ê²ƒì„ ë§Žì´ ë³´ì…¨ì„ ê²ë‹ˆë‹¤.)

ì½”í‹€ë¦°ì€ ì¼ë°˜ì ìœ¼ë¡œ ìµœìƒìœ„ ë©”ì„œë“œì™€ í”„ë¡œí¼í‹°ë¥¼ ì„ í˜¸í•˜ì§€ë§Œ, ì»´íŒ¨ë‹ˆì–¸ ê°ì²´ë¥¼ í†µí•´ ì´ëŸ¬í•œ í”„ë¡œí¼í‹°ì™€ ë©”ì„œë“œë¥¼ ë‘˜ëŸ¬ì‹¸ëŠ”(scoping) í´ëž˜ìŠ¤ë¡œ ì§€ì •í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ì´ëŸ¬ë©´ ë„¤ìž„ìŠ¤íŽ˜ì´ìŠ¤ ì˜¤ì—¼ì„ ë°©ì§€í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

## Companion object ì˜ naming ðŸ”¥

ì»´íŒ¨ë‹ˆì–¸ ê°œì²´ì— ì´ë¦„ì„ ìˆ˜ì •í•  ìˆ˜ ìžˆë‹¤!

Java ì—ì„œ Kotlin ì˜ ì»´íŒ¨ë‹ˆì–¸ ì˜¤ë¸Œì íŠ¸ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²½ìš°ì— Companion ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì°¸ì¡°í•˜ëŠ”ë° ì´ ì´ë¦„ì„ ë°”ê¿” ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒ.

```kotlin
class Widget {
    companion object Factory {
        fun create() {}
    }
}
```

ìœ„ì™€ ê°™ì´ ì»´íŒ¨ë‹ˆì–¸ ì˜¤ë¸Œì íŠ¸ ë„¤ì´ë°ì„ í†µí•´ ì½”ë“œ ê°€ì‹œì„±ì„ ë”ìš± ë†’ì—¬ì¤„ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

ìœ„ì™€ ê°™ì´ ì´ë¦„ì„ ì§€ì •í•˜ëŠ” ê²½ìš° ìƒì„±ëœ í´ëž˜ìŠ¤ì— ìƒˆë¡œ ì§€ì •ëœ ì´ë¦„ì´ ì§€ì •ë˜ê²Œ ë˜ê³ , í•´ë‹¹ ì´ë¦„ì„ ì‚¬ìš©í•´ ì°¸ì¡°í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

```java
// Main.java
public class Main {
    public static void main(String[] args) {
        Widget.Factory.create();
    }
}
```

ì´ë¥¼ í†µí•´ì„œ ì»´íŒ¨ë‹ˆì–¸ ì˜¤ë¸Œì íŠ¸ì— ë³´ë‹¤ ì˜ë¯¸ìžˆëŠ” ì´ë¦„ì„ ì œê³µí•  ìˆ˜ ìžˆê³ , ìœ„ì—ì„œ ì²˜ëŸ¼ íŒ©í† ë¦¬ ë©”ì„œë“œ ì˜ˆì‹œì™€ ê°™ì€ ë³´ë‹¤ ì¢‹ì€(?) ì´ë¦„ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ì£ .

ê·¸ë¦¬ê³  ìžë°”ì—ì„œ ì‚¬ìš©ë  ë•Œ Companion ì´ë¼ëŠ” ì½”í‹€ë¦° í‘œì‹ì´ ì—†ì–´ì§€ë¯€ë¡œ ë³´ë‹¤ ìžì—°ìŠ¤ë ˆ ì‚¬ìš©ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.

## ë§ˆì¹˜ë©°

`companion object` ì— ë„¤ì´ë°ì´ ê°€ëŠ¥í•˜ë‹¤ë‹ˆ! ê·¸ë ‡ê²Œ í° ê¸°ëŠ¥ì€ ì•„ë‹ˆì§€ë§Œ ìž¬ë¯¸ìžˆëŠ” ê¸°ëŠ¥ì„ ì•Œê²Œëœ ê²ƒ ê°™ì•„ ê¸°ë¶„ì´ ì¢‹ë„¤ìš”. ì•žìœ¼ë¡œ ìœ ì˜ë¯¸í•œ ë„¤ì´ë°ì„ í†µí•´ ì½”ë“œ ê°€ì‹œì„±ì„ ë†’ì¼ ìˆ˜ ìžˆì„ ê²ƒ ê°™ë„¤ìš”. ì—¬ëŸ¬ë¶„ë„ ì ìš©í•´ë³´ì„¸ìš”! ðŸ‘

## Referencs

![](https://images-na.ssl-images-amazon.com/images/I/51H+ZH1ZqXL._SX404_BO1,204,203,200_.jpg)

> mastering kotlin
