# GDG Korea Android AAC-ViewModel
- 2022-04-07 19:00~21:00
- meet.google.com/qwn-uzph-ovk

초반 정리는 못함.

답변들

- Use case
- view model 이 여러개 인경우..
  - view model 간의 통신을 전제하지 않고 개발함. 
  - 공통 access 가 있는 경우 그부분을 use case 로 .
    - viewmodel 은 기본적으로 단방향성,.
    - n 개의 viewmodel 에서 정제하는 로직을 쉐어.. 등
- 하나의 화면에 굉장히 많은 세션들..
  - UI 에 있는 모델 핸들링 을 위해 
  - 각 섹션별로 UI 모델 나눠서 처리
  - 뷰 홀더 또는 ..
  - 섹션 별로 헬퍼 클래스를 만들어서 핸들링.
  - 최종적으로 취합된 데이터를 갖고 UI
  - 굳이 1대 n 으로 안해도 ..
  - 1대 1로 하더라도.. 핼퍼클래스를 이용해서 하면 괜찮았다.
  - 뷰에 대한 데이터에 대한 핸들링을 여러곳으로 분리 해서 처리.
  - UI 모델 헬퍼
  - 하나의 화면에 굉장한 다양한 카테고리  상품 핸들링 
- 1:1 로 할수밖에 없는 경우가 많은게..
  - 케이스마다다르지만 , 뷰를 액티비티로 볼건지 프래그먼트로 볼건지.. 아니면 컴포넌트로 볼건지
  - 그용도를 위해서만 만든다면 1:1
  - 비즈니스로직이 그 화면에만 노출하는 경우.가 대다수임
  - 동일 데이터, -> 다양한 스타일 인 경우는 거의없는것 같았음.
- close 만 하..
  - 뷰만 분리 or 뷰 뷰모델 한쌍으로 분리
- 뷰랑 뷰모델 어디까지 나누는게 좋을지..
  - 어디까지를 뷰라고?
  - pluu 
    - 작은 텍스트뷰도 뷰라고,,,
    - 뷰의 형태가 다양한 뷰 그룹인가,,
    - 엑티,프레그 는 .....
    - 작업할때 전제로. 그나마 의미있게 하려면
    - 리사이클러 뷰 타입 하나의 구조
  - 뷰 에서볼때 
    - xml 통해서 보는데 9(compose 제외)
    - 뷰를 얼만틈 나눠서 어디까지 나눠서 분리할 수 있는가는
    - 개발자의 트레이드 오프 지점에 따라 다를수있다 생강ㄱ함
    - 어떻게 하면 잘 나눌까를 잘 고민하는 단계에서 여러가지 방식들이 나온다
    - 케ㅏ바케
  - 엑티비티, fragment 자체는 뷰라고 생각하진 ㅏ않았고
    - 각 컴포넌트가 뷰로? 각ㄱ
    - 점점복잡해지는 비즈니스,,
    - 컴포즈에서도 다시그릴때마다 각각의 뷰모델에서 주입받아서 사용함
    - 각각 뷰가 각각 뷰모델을 갖는게 이상적이지 않을까
  - 뷰,,, 
    - 한개 단위 작은 버튼 단위를 나누는 경험도했었고..
    - 등
    - 뷰를 나누는 기준같으건 사실 중요하지않음
    - 과연어ㅓㄸ
    - 어느쪽이든 상관없는데 팀원들의 러닝커브 등 신경을 써여함
    - 뷰가네
  - 컴포저블 폴덩 나눔 
    - xml include

...

- 질문..
- context 때문에 엑티비티 프레그먼트에...
- 뷰모델에서 컨텍스트를 필요하는 경우 어떻게..?
- 스트링 리소스 가져올 떄도 필요 applicition context
- config change 등에서도 필요..
- cotnext를 감싸도 문제가 없는지>..?
  - 액티, 프레그먼트는 context를 넘기면 메모리릭 유발가능.
  - 강한 참조를 뷰모델에 갖고 잇으면
  - 화면 체인지 등이 이러나면 oncreate 재시작.. 뷰모델 스콥은 더 큰 스콥을 가지기 때매
  - destroy된 것를 갖고 있으면 메모리 릭이 이뤄지게 되는 것.
  - []
    - 앱 내부에서 언어 변경 기능이 있는데
    - 동적으로 언어 변경....
    - 뷰모델에 넘기면 config 를 모르는 채로 사용이 될수있겠음
  - pluu
    - context는 개인적으로 넘기지 않는 것을 권장.
    - viewmodel 간단히...
    - 개인적으로 뷰모델을 빠르게 테스트를 돌리는게 좋다는 생각
    - context를 최대한 배제
    - 맵핑을 하더라도 인터페이스만 넘겨서..
    - 중계자 패턴 ...
    - config 체인지 는 선택같은디
    - 엑티비티 엑스트라, fragment 아규먼트,,
    - 세이브 스테이트 핸들 쓰지 않고..?
- context 대신 뷰모델에 applicaion 을 받아서 쓰는 경우도 안좋은지
  - 뷰모델을 테스트 코드에 쓴다면...최대한 applicaion dependency를 빼는것ㅇ이...
  - 뷰모델 테스트는 안드로이드 테스트가 아니라 그냥 테스트에 있는게 맞는것같아서..
  - 개인적을 권장 x
  - application context 는 gps 등 플로우 등 이벤트..? 하는 경우도 있는데 선택
  - 그걸 래핑한 인터페이스 ?
  - Unit test 를 위해 배제 ㅎ ㅏ는 것이 좋을 듯.
  - []
  - 컨텍스트 넘길때 무조건 래핑해서 넘기는 것을 선호...
  - 굳이 넘어가야 한다면, 유즈케이스로 빼서, 인터페이스... 해서 유닛 테스트 가능하게
  - JVM 에서 하는 유닛 테스틑
  - 가급적이면 JUnit5 를 선호,.
  - 컨텍스트는 그냥 넘기지 않고 인터페이스로 래핑해서 넘기는 것을 선호..
- 그냥 save handler 씀
- save state 도 번들.. 이어서 번들을 넘어가는 크기라면 다른 방법으로
- 뷰모델에서 다 저장하면 안되는 걸수도 있고
- db면 db, file 이면 file 등
- 처음 부터 다시 ui?

...

- mutable live data, live data 왜 구분하는지?
  - 뷰모델.. 프로퍼티를 노출? 함수를 ㄴ출?
  - 보통 함수만 노출
  - mutable 을 외부에 노출 할 것인지 안할것인지를 기준으로 

...

- activity 에서 set 해야 하는경우 (2way 바인딩 하는 경우 어떻게 하는게 좋은지)
  - 더이상 안쓰고있음
  - 데이터바인딩 지원이 안되고 있기 때문에 줄 여 나가는중..
  - []
  - 거의 안쓰는중...
  - 컴포즈로 넘어가면 액티비티에서 핸들링하는경우가 많ㅇ을듯 싶음.
  - []
  - 2way를 안쓰려면?
  - view를 래핑하는 object를 하나 만들어서 콜백 리스너를 붙이면됨 
  - 체인지 콜백을 받아서 처리 등..
  - 2way바인딩은 보통 뷰에서의 반응을 어떻게 받을지 임
  - 래핑을 얼마나 잘 할건지는 ....잘 

...
pluu
- 2 way 바인딩 쓸때 이퀄로 해서
- 리스너 같은 패턴은 주입도 바인딩이지만
- 데이터 바인딩 메서드를 바로 연결 할 수 있어서
- 리스너 쪽에 별도 바인딩을 엮는 것도 방법...
- 2way 
- 엮은 것을 외부주입으로 할지,,, 펑션으로 한지 는 취향

...




- sunflower ..?샘플 
  - 초기 진입자 대상..
  - 선플라워는 좀 더 초급 대상
  - 시작점.

...

- viewmodel 에 뷰를 넘기는것 xx
...

- 뷰의 visible처리나 isSelcted 처리 같은 경우 뷰모델에서 하는게 좋을까요? 액티비티에서 처리하는 게 좋을까요?
  - .

....

- RecyclerView(뷰 재활용 시스템) 내부에서 사용하는 하나의 View Type 에 해당하는 ViewModel 을 구성한다고 할때, AAC ViewModel vs 순수한 ViewModel 어떤것이 좋다고 생각하시나요?
  - AAC 뷰모델은 일종의 뷰모델을 담는컨테이너 역할이어서
  - 리사이클러 뷰와 적합하지 않다고 생각...
  - 엑티비티나 프레그먼트 단위 ,,,
  - 단순한 스크롤 이벤트로 핸들링 하려면 추가적 코ㅡ 필요할듯
  - 컨테이닝을 하지 ㅏㅇㄴㅎ는 것을 선호 
- 모델리스트를 UI모델에서 내려주고있고
- 리스트를 뿌려주는 형태로
- 

,,,

- viewholder에서 이벤트를 처리하기위해 adapter에 vm을 보내 clickevent를 처리하는 경우도 보았고 callback형태의 interface를 만들어서 activity/fragment에서 이벤트를 받아 vm으로 이벤트를 보내는 경우도 보았는대 뭐가 정석일까요?
  - 정석이 어떤 건지에 따라...
  - 공식문서는 데이터 클래스 전달할때 이벤트 콜백도 넘겨서 처리
  - UI 모델도 호출한느 방식을 문서상으로 권장 중
  - 업계에서는 .. 아마 많진않을듯
  - 어뎁터에 vm 을 보내는 경우는..없었던것 같음
  - []
  - 아직 리사이클러 뷰에서 뷰모델을 쓰는 좋은방법은 아직..저도 문제임
  - 가급적이면 뷰모델을 던지지 않고 쓰는 방식을 선호
  - 가ㅅ끔식 클릭이벤트 연결 시 어ㄷ쩔수없이 연결
  - 액티비티 속해있는 전체 뷰모델이 아닌 한 로우만 쓰는 뷰모델 별도로 만들어서 넣는 형식
  - 함수들만 가지고 있는 묶음체> 로직수행으로만 구현중
  - 사실 컴포즈에서는 레이지 컬럼이 나오면서 깔끔히 해결됨... 빨리 컴포즈로.

..

- 
- 웹뷰만 띄우는 Activity나 Fragment에서도 ViewModel을 사용해야 할까요? 실무에서 어떻게 쓰고 계신지 궁금합니다.  (edited)  


...

- AAC-ViewModel 에서 lifecycleObserver 를 사용하여 View의 lifecycle 을 제어한다면 1:1 로 강결합되기 때문에 지양해야된다고 생각이 되는데 어떻게 생각하시는지 궁금합니다.
  - 애초에 하면 안된ㄴ 패턴>
  - 간혹 라이프에 따라 특정 동작할때
  - 